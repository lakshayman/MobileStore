(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{33:function(e,t){t.operatorList=["VodaphoneIdea","Airtel","OJO"]},78:function(e,t,n){"use strict";n.r(t);var r,a,c,o=n(0),s=n.n(o),i=n(22),l=n.n(i),d=n(10),u=n(11),h=n(13),p=n(12),j=n(29),b=n(3),O=n(23),f=n(19),m=n.n(f),x=function(e){e?m.a.defaults.headers.common.Authorization=e:delete m.a.defaults.headers.common.Authorization},v="GET_ERRORS",g="USER_LOADING",w="SET_CURRENT_USER",y=function(e){return{type:w,payload:e}},k=function(){return function(e){localStorage.removeItem("jwtToken"),x(!1),e(y({}))}},S=n(16),C=n(21),D=n(44),R=n(14),A=n(73),E={isAuthenticated:!1,user:{},loading:!1},L={},I=Object(C.b)({auth:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:E,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case w:return Object(R.a)(Object(R.a)({},e),{},{isAuthenticated:!A(t.payload),user:t.payload});case g:return Object(R.a)(Object(R.a)({},e),{},{loading:!0});default:return e}},errors:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:L,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case v:return t.payload;default:return e}}}),T=[D.a],B=Object(C.d)(I,{},Object(C.c)(C.a.apply(void 0,T))),N=n(24),U=n(30),_=n.n(U),K=n(1),M=function(e){Object(h.a)(n,e);var t=Object(p.a)(n);function n(){var e;return Object(d.a)(this,n),(e=t.call(this)).onChange=function(t){e.setState(Object(N.a)({},t.target.id,t.target.value))},e.onSubmit=function(t){t.preventDefault();var n={name:e.state.name,password:e.state.password};e.props.loginUser(n),console.log(n)},e.state={name:"",password:"",errors:{}},e}return Object(u.a)(n,[{key:"componentWillReceiveProps",value:function(e){e.auth.isAuthenticated&&this.props.history.push("/dashboard"),e.errors&&this.setState({errors:e.errors})}},{key:"componentDidMount",value:function(){this.props.auth.isAuthenticated&&this.props.history.push("/dashboard")}},{key:"render",value:function(){var e=this.state.errors;return Object(K.jsx)("div",{className:"container-fluid min-vh-100",children:Object(K.jsx)("div",{class:"row",children:Object(K.jsxs)("div",{class:"col-xl-5 col-lg-6 col-md-8 col-sm-10 mx-auto form p-4",children:[Object(K.jsx)("h1",{class:"display-4 py-3 text-center text-dark font-weight-bold text-truncate",children:"Manchanda Mobile"}),Object(K.jsx)("div",{class:"px-2 py-2",children:Object(K.jsxs)("form",{onSubmit:this.onSubmit,class:"justify-content-center",children:[Object(K.jsxs)("div",{class:"form-group py-3",children:[Object(K.jsx)("label",{class:"sr-only text-dark",children:"Name"}),Object(K.jsx)("input",{onChange:this.onChange,value:this.state.name,error:e.name,id:"name",type:"text",class:"form-control text-white",className:_()("",{invalid:e.name||e.namenotfound})}),Object(K.jsxs)("span",{className:"red-text",children:[e.name,e.namenotfound]})]}),Object(K.jsxs)("div",{class:"form-group py-3",children:[Object(K.jsx)("label",{class:"sr-only text-dark",children:"Password"}),Object(K.jsx)("input",{onChange:this.onChange,value:this.state.password,error:e.password,id:"password",type:"password",class:"form-control text-white",className:_()("",{invalid:e.password||e.passwordincorrect})}),Object(K.jsxs)("span",{className:"red-text",children:[e.password,e.passwordincorrect]})]}),Object(K.jsx)("button",{type:"submit",class:"btn-success btn-large waves-effect waves-light hoverable blue accent-3",children:"Launch"})]})})]})})})}}]),n}(o.Component),J=Object(S.b)((function(e){return{auth:e.auth,errors:e.errors}}),{loginUser:function(e){return function(t){m.a.post("https://infinite-bastion-43171.herokuapp.com/api/login",e).then((function(e){var n=e.data.token;localStorage.setItem("jwtToken",n),x(n);var r=Object(O.a)(n);t(y(r))})).catch((function(e){return t({type:v,payload:e.response.data})}))}}})(M),z=n(48),G=Object(S.b)((function(e){return{auth:e.auth}}))((function(e){var t=e.component,n=e.auth,r=Object(z.a)(e,["component","auth"]);return Object(K.jsx)(b.b,Object(R.a)(Object(R.a)({},r),{},{render:function(e){return!0===n.isAuthenticated?Object(K.jsx)(t,Object(R.a)({},e)):Object(K.jsx)(b.a,{to:"/"})}}))})),P=n(4),F=n.n(P),V=n(15),W=n(33),q=n(25),H=m.a.create({baseURL:"https://infinite-bastion-43171.herokuapp.com/api"}),Q={insertRecord:function(e){return H.post("/record",e)},getAllRecords:function(){return H.get("/records")},updateRecordById:function(e,t){return H.put("/record/".concat(e),t)},deleteRecordById:function(e){return H.delete("/record/".concat(e))},getRecordById:function(e){return H.get("/record/".concat(e))}},X=n(26),Y=X.a.div(r||(r=Object(q.a)(["\n    color: #ef9b0f;\n    cursor: pointer;\n"]))),Z=X.a.div(a||(a=Object(q.a)(["\n    color: #ff0000;\n    cursor: pointer;\n"]))),$=X.a.div(c||(c=Object(q.a)(["\n    padding: 0 40px 40px 40px;\n"]))),ee=function(e){Object(h.a)(n,e);var t=Object(p.a)(n);function n(){var e;Object(d.a)(this,n);for(var r=arguments.length,a=new Array(r),c=0;c<r;c++)a[c]=arguments[c];return(e=t.call.apply(t,[this].concat(a))).updateRecord=function(t){t.preventDefault(),window.location.href="/update/".concat(e.props.id)},e}return Object(u.a)(n,[{key:"render",value:function(){return Object(K.jsx)(Y,{onClick:this.updateRecord,children:"Update"})}}]),n}(o.Component),te=function(e){Object(h.a)(n,e);var t=Object(p.a)(n);function n(){var e;Object(d.a)(this,n);for(var r=arguments.length,a=new Array(r),c=0;c<r;c++)a[c]=arguments[c];return(e=t.call.apply(t,[this].concat(a))).deleteRecord=function(t){t.preventDefault(),window.confirm("Do tou want to delete the record ".concat(e.props.id," permanently?"))&&(Q.deleteRecordById(e.props.id),window.location.reload())},e}return Object(u.a)(n,[{key:"render",value:function(){return Object(K.jsx)(Z,{onClick:this.deleteRecord,children:"Delete"})}}]),n}(o.Component),ne=function(e){Object(h.a)(n,e);var t=Object(p.a)(n);function n(e){var r;return Object(d.a)(this,n),(r=t.call(this,e)).componentDidMount=Object(V.a)(F.a.mark((function e(){return F.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r.setState({isLoading:!0}),e.next=3,Q.getAllRecords().then((function(e){r.setState({records:e.data.data,isLoading:!1})}));case 3:case"end":return e.stop()}}),e)}))),r.state={records:[],columns:[],isLoading:!1},r}return Object(u.a)(n,[{key:"render",value:function(){var e=this.state,t=e.records;e.isLoading;return console.log("TCL: RecordsList -> render -> records",t),Object(K.jsx)($,{children:Object(K.jsxs)("table",{id:"dtBasicExample",class:"table table-hover caption-top",children:[Object(K.jsx)("caption",{children:"List of records"}),Object(K.jsx)("thead",{children:Object(K.jsxs)("tr",{children:[Object(K.jsx)("th",{scope:"col",children:"#"}),Object(K.jsx)("th",{scope:"col",children:"Operator"}),Object(K.jsx)("th",{scope:"col",children:"Details"}),Object(K.jsx)("th",{scope:"col",children:"Amount"}),Object(K.jsx)("th",{scope:"col",children:"Time"}),Object(K.jsx)("th",{scope:"col",children:"Update"}),Object(K.jsx)("th",{scope:"col",children:"Delete"})]})}),Object(K.jsx)("tbody",{children:function(){for(var e=[],n=0;n<t.length;n++)e.push(Object(K.jsxs)("tr",{children:[Object(K.jsx)("th",{scope:"row",children:t[n]._id}),Object(K.jsx)("td",{children:t[n].operator}),Object(K.jsx)("td",{children:t[n].details}),Object(K.jsx)("td",{children:t[n].amount}),Object(K.jsx)("td",{children:t[n].createdDate+" "+t[n].createdTime}),Object(K.jsx)("td",{children:Object(K.jsx)("span",{children:Object(K.jsx)(te,{id:t[n]._id})})}),Object(K.jsx)("td",{children:Object(K.jsx)("span",{children:Object(K.jsx)(ee,{id:t[n]._id})})})]}));return e}()})]})})}}]),n}(o.Component),re=function(e){Object(h.a)(n,e);var t=Object(p.a)(n);function n(e){var r;return Object(d.a)(this,n),(r=t.call(this,e)).onLogoutClick=function(e){e.preventDefault(),r.props.logoutUser()},r.handleOperatorChange=function(){var e=Object(V.a)(F.a.mark((function e(t){var n;return F.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:"Select Operator"===(n=t.target.value)?document.getElementById("sel1").focus():(r.setState({operator:n}),document.getElementById("det").focus());case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),r.handleDetailsChange=function(){var e=Object(V.a)(F.a.mark((function e(t){var n;return F.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=t.target.validity.valid?t.target.value:r.state.details,r.setState({details:n});case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),r.handleAmountChange=function(){var e=Object(V.a)(F.a.mark((function e(t){var n;return F.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=t.target.value,r.setState({amount:n});case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),r.handleClick=function(){var e=Object(V.a)(F.a.mark((function e(t){return F.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.target.select();case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),r.handleKeyDownDet=function(e){"Enter"===e.key&&(document.getElementById("amt").focus(),document.getElementById("amt").select())},r.handleKeyDownAmt=function(){var e=Object(V.a)(F.a.mark((function e(t){var n,a,c,o,s,i,l,d,u;return F.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("Enter"!==t.key){e.next=17;break}if(n=r.state,a=n.operator,c=n.details,o=n.amount,s=[],"Select Operator"===a&&s.push("Select Operator!"),""===c&&s.push("Enter details!"),o||s.push("Enter Amount!"),s.length){e.next=16;break}return i=Date().toLocaleString(),l=i.substring(4,15),d=i.substring(16,24),u={operator:a,details:c,amount:o,createdDate:l,createdTime:d},e.next=13,Q.insertRecord(u).then((function(e){r.setState({operator:"Select Operator",details:"",amount:0})}));case 13:window.location.reload(),e.next=17;break;case 16:window.alert(s);case 17:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),r.handleSubmit=Object(V.a)(F.a.mark((function e(){var t,n,a,c,o,s,i,l,d;return F.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=r.state,n=t.operator,a=t.details,c=t.amount,o=[],"Select Operator"===n&&o.push("Select Operator!"),""===a&&o.push("Enter details!"),0===c&&o.push("Enter Amount!"),o.length){e.next=15;break}return s=Date().toLocaleString(),i=s.substring(4,15),l=s.substring(16,24),d={operator:n,details:a,amount:c,createdDate:i,createdTime:l},e.next=12,Q.insertRecord(d).then((function(e){window.alert("Movie inserted successfully"),r.setState({operator:"Select Operator",details:"",amount:0})}));case 12:window.location.reload(),e.next=16;break;case 15:window.alert(o);case 16:case"end":return e.stop()}}),e)}))),r.state={operator:"Select Operator",details:"",amount:0},r}return Object(u.a)(n,[{key:"render",value:function(){var e=this.props.auth.user;return console.log(e),Object(K.jsxs)("div",{children:[Object(K.jsxs)("nav",{class:"navbar navbar-expand-md navbar-dark bg-dark",children:[Object(K.jsx)("a",{class:"navbar-brand mx-2",href:"/dashboard",children:"Dashboard"}),Object(K.jsx)("button",{onClick:this.onLogoutClick,className:"btn waves-effect waves-light hoverable blue accent-3 mx-2",children:"Logout"})]}),Object(K.jsxs)("div",{children:[Object(K.jsxs)("div",{class:"form-group mx-5 d-flex align-items-center my-5",children:[Object(K.jsxs)("select",{class:"form-control mx-2",id:"sel1",onChange:this.handleOperatorChange,value:this.state.operator,autoFocus:!0,children:[Object(K.jsx)("option",{children:"Select Operator"}),function(){for(var e=[],t=0;t<W.operatorList.length;t++)e.push(Object(K.jsx)("option",{children:W.operatorList[t]}));return e}()]}),Object(K.jsx)("label",{class:"mx-2",for:"det",children:Object(K.jsx)("h4",{children:"Details"})}),Object(K.jsx)("input",{type:"number",class:"form-control mx-2",id:"det",onKeyDown:this.handleKeyDownDet,pattern:"[6-9]{1}[0-9]{9}",onChange:this.handleDetailsChange,value:this.state.details}),Object(K.jsx)("label",{class:"mx-2",for:"amt",children:Object(K.jsx)("h4",{children:"Amount"})}),Object(K.jsx)("input",{type:"number",class:"form-control mx-2",id:"amt",onKeyDown:this.handleKeyDownAmt,onChange:this.handleAmountChange,onClick:this.handleClick,value:this.state.amount}),Object(K.jsx)("button",{type:"submit",class:"btn btn-primary",onClick:this.handleSubmit,children:"Submit"})]}),Object(K.jsx)("div",{children:Object(K.jsx)(ne,{})})]})]})}}]),n}(o.Component),ae=Object(S.b)((function(e){return{auth:e.auth}}),{logoutUser:k})(re);if(localStorage.jwtToken){var ce=localStorage.jwtToken;x(ce);var oe=Object(O.a)(ce);B.dispatch(y(oe));var se=Date.now()/1e3;oe.exp<se&&(B.dispatch(k()),window.location.href="./")}var ie=function(e){Object(h.a)(n,e);var t=Object(p.a)(n);function n(){return Object(d.a)(this,n),t.apply(this,arguments)}return Object(u.a)(n,[{key:"render",value:function(){return Object(K.jsx)(S.a,{store:B,children:Object(K.jsx)("div",{className:"App",children:Object(K.jsxs)(j.a,{basename:"/",children:[Object(K.jsx)(b.b,{exact:!0,path:"/",component:J}),Object(K.jsx)(b.d,{children:Object(K.jsx)(G,{exact:!0,path:"/dashboard",component:ae})})]})})})}}]),n}(o.Component);l.a.render(Object(K.jsx)(s.a.StrictMode,{children:Object(K.jsx)(ie,{})}),document.getElementById("root"))}},[[78,1,2]]]);
//# sourceMappingURL=main.b3381496.chunk.js.map